function initMap(){var e={lat:41.881,lng:-87.623};map=new google.maps.Map(document.getElementById("map"),{center:e,zoom:15,type:["store"]});var o=document.getElementById("pac-input"),n=new google.maps.places.SearchBox(o);map.controls[google.maps.ControlPosition.TOP_LEFT].push(o),map.addListener("bounds_changed",function(){n.setBounds(map.getBounds())});var a=[];n.addListener("places_changed",function(){var e=n.getPlaces();if(0!=e.length){a.forEach(function(e){e.setMap(null)}),a=[];var o=new google.maps.LatLngBounds;e.forEach(function(e){if(!e.geometry)return void console.log("Returned place contains no geometry");var n={url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};a.push(new google.maps.Marker({map:map,icon:n,title:e.name,position:e.geometry.location})),e.geometry.viewport?o.union(e.geometry.viewport):o.extend(e.geometry.location)}),map.fitBounds(o)}}),infowindow=new google.maps.InfoWindow,new google.maps.places.PlacesService(map).nearbySearch({location:e,radius:500,type:["store"]},callback)}function callback(e,o){if(o===google.maps.places.PlacesServiceStatus.OK)for(var n=0;n<e.length;n++)createMarker(e[n])}function createMarker(e){var o=e.geometry.location,n=new google.maps.Marker({map:map,position:e.geometry.location});google.maps.event.addListener(n,"click",function(){infowindow.setContent(e.name),infowindow.open(map,this)})}var map,infowindow;